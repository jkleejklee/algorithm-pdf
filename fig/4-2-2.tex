\input{pre}
\begin{document}
\begin{tikzpicture}[every label/.style={blue}]
\foreach \i/\x/\y/\text in{1/0/0/A,2/2/2/B_1,3/2/0/B_2,4/2/-2/B_3,5/5/2/C_1,6/5/0/C_2,7/5/-2/C_3,9/8/-1/D_2}{
    \node[circle,minimum width=30pt,draw] (\i) at(\x,\y){$\text$};}
\foreach \i/\x/\y/\lab/\text in{8/8/1/f_4(D_1){=}5/D_1,10/10/0/f_5(E){=}0/E}{
    \node[circle,minimum width=30pt,fill=blue!20,draw] (\i)[label=above:$\lab$] at(\x,\y){$\text$};}    
\foreach \u/\v/\num in{1/2/2,1/3/5,1/4/1,2/5/12,2/6/14,2/7/10,3/5/6,3/6/10,3/7/4,4/5/13,4/6/12,4/7/11,5/8/3,5/9/9,6/8/6,6/9/5,7/8/8,7/9/10,8/10/5,9/10/2}{
    \draw (\u) --(\v) node[very near start,sloped,above]{\num};}
\end{tikzpicture}
\end{document}